# Load the variables for the current theme.
source = colours.conf

debug:disable_logs = false

monitor=,preferred,auto,auto
monitor=,preferred,auto-up,auto

$terminal = kitty
$file_manager = nemo
$web_browser = firefox

$switch_wallpaper = ~/bin/switch_wallpaper

exec-once = hypridle
exec-once = hyprpaper
exec-once = hyprpm reload -nn

# export the instance signature so that darkman can run `hyprctl`
exec-once = echo \
    "$HYPRLAND_INSTANCE_SIGNATURE" \
    > "$XDG_RUNTIME_DIR/HYPRLAND_INSTANCE_SIGNATURE"

exec-once = ~/bin/reload_theme

exec-once = waybar

# TODO: set the cursor theme
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# fixes gnome apps
env = GSK_RENDERER,ngl

# fixes vscodium
env = ELECTRON_OZONE_PLATFORM_HINT,auto

general {
    layout = hy3

    gaps_in = 3
    gaps_out = 6

    border_size = 2

    col.active_border = $iris
    col.inactive_border = $highlightHigh
}

decoration {
    rounding = 5
    rounding_power = 2

    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = false
    }

    blur {
        enabled = false
    }
}

animations {
    enabled = true

    bezier = linear,0,0,1,1

    animation = global, 1, 10, linear

    animation = windows, 1, 2, linear, slide
    animation = windowsIn, 1, 2, linear, popin
    animation = windowsOut, 1, 2, linear, popin

    animation = layers, 1, 2, linear, popin
    animation = layersIn, 1, 2, linear, popin
    animation = layersOut, 1, 2, linear, popin

    animation = fadeIn, 1, 2, linear
    animation = fadeOut, 1, 2, linear
    animation = fade, 1, 2, linear

    animation = fadeLayersIn, 1, 2, linear
    animation = fadeLayersOut, 1, 2, linear

    animation = border, 1, 2, linear

    animation = workspaces, 1, 2, linear, slide
    animation = workspacesIn, 1, 2, linear, slide
    animation = workspacesOut, 1, 2, linear, slide
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = -1
    background_color = $base
}

input {
    kb_layout = se
    kb_variant = mac
    kb_model =
    kb_options =
    kb_rules =

    repeat_rate = 20

    natural_scroll = true

    follow_mouse = 2

    sensitivity = 0

    touchpad {
        natural_scroll = true
        clickfinger_behavior = true
        tap-to-click = false
    }
}

gestures {
    workspace_swipe = true
    workspace_swipe_min_speed_to_force = 1
}

$mod = SUPER

bind = $mod, return, exec, $terminal
bind = $mod, space, exec, $menu

bind = $mod SHIFT, E, exit

bind = $mod, B, exec, $web_browser
bind = $mod, C, exec, /usr/bin/codium
bind = $mod, F, fullscreen
bind = $mod, N, exec, $file_manager
bind = $mod, Q, killactive
bind = $mod, R, hy3:changegroup, opposite
# bind = $mod, T, hy3:makegroup, tab
bind = $mod, W, exec, $switch_wallpaper

bind = $mod, left, hy3:movefocus, l
bind = $mod, right, hy3:movefocus, r
bind = $mod, up, hy3:movefocus, u
bind = $mod, down, hy3:movefocus, d

bind = $mod SHIFT, left, hy3:movewindow, l
bind = $mod SHIFT, right, hy3:movewindow, r
bind = $mod SHIFT, up, hy3:movewindow, u
bind = $mod SHIFT, down, hy3:movewindow, d

bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

bind = $mod SHIFT, 1, hy3:movetoworkspace, 1, follow
bind = $mod SHIFT, 2, hy3:movetoworkspace, 2, follow
bind = $mod SHIFT, 3, hy3:movetoworkspace, 3, follow
bind = $mod SHIFT, 4, hy3:movetoworkspace, 4, follow
bind = $mod SHIFT, 5, hy3:movetoworkspace, 5, follow
bind = $mod SHIFT, 6, hy3:movetoworkspace, 6, follow
bind = $mod SHIFT, 7, hy3:movetoworkspace, 7, follow
bind = $mod SHIFT, 8, hy3:movetoworkspace, 8, follow
bind = $mod SHIFT, 9, hy3:movetoworkspace, 9, follow
bind = $mod SHIFT, 0, hy3:movetoworkspace, 10, follow

bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

# Ignore maximize requests from apps.
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

plugin {
    hy3 {
        tabs {
            # TODO: match waybar
            height = 22

            padding = 6
            radius = 5
            border_width = 2
            text_font = JetBrains Mono Nerd Font

            col.active = $base
            col.active.border = $iris
            col.active.text = $text

            col.focused = $highlightMed
            col.focused.border = $highlightHigh
            col.focused.text = $text

            col.inactive = $base
            col.inactive.border = $highlightHigh
            col.inactive.text = $subtle

            col.urgent = $base
            col.urgent.border = $love
            col.urgent.text = $text

            col.locked = $base
            col.locked.border = $gold
            col.locked.text = $text
        }

    }
}
